# Go 1.19

Go 1.19 был выпущен 15 августа 2022 года.

## Новые API в стандартной библиотеке

1. Включён специальный пакет `sync/atomic` с гарантиями для атомарных операций.
2. Пакет `strings` и `bytes` получил методы `Cut`, `CutPrefix`, `CutSuffix`:
3. Добавлены новые функции `sync.Map` с улучшенной производительностью и возможностями. 
`LoadOrStore` - Уже существующая функция, которая пытается загрузить значение по ключу, или сохранить новое значение, если ключ отсутствует.
Она получила улучшения по производительности и стабильности.
`Delete` - Удаляет элемент по ключу. Добавили возможность безопасного удаления элементов без необходимости блокировки вручную.
`Range` - Итерация по всем элементам карты с помощью функции-обратного вызова. Улучшили производительность и добавили новые возможности для управления итерациями.
4. Расширены функции для работы с картами и срезами, такие как `maps.Clone`, `maps.Delete`, `slices.Clone`, `slices.Contains`

```go
// Пакет atomic
var count atomic.Int64  // Готовый атомарный тип
count.Add(1)

// Пакет strings/bytes
before, after, found := strings.Cut("key=value", "=")

// Пакет debug/buildinfo
info, _ := debug.ReadBuildInfo()
fmt.Println(info.Main.Version)
```

## Инструменты разработки

1. Генерация документации для дженериков (`go doc`)
2. Стабилизирован `-shuffle` в тестах.
`go test -shuffle=on` для детерминированного перемешивания
3. Улучшен `go vet` для проверки дженериков
4. Улучшена работа `go test` с поддержкой записи и воспроизведения тестовых данных (через `-test.gocoverdir`).
Улучшена поддержка модулей и кэширования зависимостей.


## Улучшения производительности

1. Уменьшен размер стека горутин
Теперь по умолчанию занимают 2 КБ вместо 8 КБ (экономит память при миллионах горутин)
2. Оптимизирован `sync.Pool`
Ускорено на 20-30% в высоконагруженных сценариях
3. Улучшен сборщик мусора
Снижены паузы GC для больших хипов

## Безопасность

1. Строже проверки в `unsafe.Slice`
2. Ограничения в преобразованиях `cgo`

## Поддержка платформ

* Оптимизации для Windows/Linux
* Поддержка LoongArch CPU

## Прочие улучшения

* Добавлен пакет `golang.org/x/sync/semaphore`
* Пакет `crypto/tls` получил возможность настройки в FIPS-совместимом режиме (только если Go собран с FIPS-поддержкой, например, через внешние библиотеки).
* Новый формат `buildinfo` (более компактный)
* Обновлён `Unicode` до версии 14.0
* Ускорена работа `encoding/json`
